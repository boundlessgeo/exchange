<script type="text/javascript" src="https://mapbeta.gvslabs.com/api/mow-minimal.js"></script>

<script type="text/javascript">
    document.addEventListener("DOMContentLoaded", function (event) {
        {% if resource.bbox_string %}
        var bbox = [{{ resource.bbox_string }}];
        {% else %}
        var bbox = null;
        {% endif %}
        source = null;
        extent = [];
        {% if resource.get_tiles_url %}
        source = {
            'url': '{{ resource.ows_url }}',
            'layers': ['{{ resource.typename }}'],
            'name': '{{ resource.typename }}'
        };
        extent = '{{ resource.bbox_string }}'
        {% endif %}
        MoW.ready(function() {
                map = new MoW.Map({target: 'preview_map'});
                var wmsOverlay;
                wmsOverlay = MoW.Factory.createWMSOverlay(source);
                map.addOverlay(wmsOverlay);
                // map.setBasemap(MoW.Basemap.ID.LOW_BW_CADRG);
                map.setExtent(extent.split(','));
                map.addOverlay(wmsOverlay);
            });
        });
</script> 